---
import EventRegisterBox1 from "@/components/EventRegister/EventRegisterBox1.astro";
import EventRegisterBox2 from "@/components/EventRegister/EventRegisterBox2.astro";
import EventRegisterBox3 from "@/components/EventRegister/EventRegisterBox3.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
const {
  eventName = "SESSION TALK WITH AJARN",
  eventDate = "20-21 January 2024",
  eventFaculty = "คณะสถาปัตยกรรมศาสตร์ / Faculty of Architecture",
  eventTime = "10:00-17:00",
  eventDepartment = "XXXX",
  eventSection = "XXXX",
  eventMaxSeats = "999",
  eventBookedSeats = "996",
} = Astro.props;
---

<BaseLayout withNav={false} withFooter={false}>
  <div class="m-16 flex max-w-xl flex-col items-center">
    <h1
      class="text-shadow-lg text-6xl font-bold leading-normal tracking-wide text-white"
    >
      ลงทะเบียนกิจกรรม
    </h1>
    <h1 class="font-libre text-3xl font-bold text-white">Event registration</h1>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="200"
      height="3"
      viewBox="0 0 208 3"
      fill="none"
      class="mb-12"
    >
      <path d="M0 1.5H208" stroke="#FDFFFC" stroke-width="2"></path>
    </svg>
    <h1 class="mb-4 text-center text-5xl font-bold text-white">{eventName}</h1>
    <h2 class="text-center text-xl font-bold text-white underline">
      {eventFaculty}
    </h2>
    <h2 class="mb-4 text-center text-xl font-medium text-white">
      {"ภาควิชา" + eventDepartment + " สาขาวิชา" + eventSection}
    </h2>
    <div class="mb-6 flex space-x-2">
      <div class="h-6 w-60 rounded-2xl bg-pink-500">
        <p class="text-center text-base text-white">
          ต้องลงทะเบียน / Limited seats
        </p>
      </div>
      <div class="h-6 w-24 rounded-2xl bg-pink-500">
        <p class="text-center text-base text-white">
          {eventBookedSeats + " / " + eventMaxSeats}
        </p>
      </div>
    </div>
    <div
      class="mb-28 flex h-36 w-96 flex-col justify-between rounded-2xl border-2 border-solid border-white p-4"
    >
      <div class="flex">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 20 20"
          fill="none"
          class="mr-3"
        >
          <path
            d="M17 3H16V1C16 0.447715 15.5523 0 15 0C14.4477 0 14 0.447715 14 1V3H6V1C6 0.447715 5.55228 0 5 0C4.44772 0 4 0.447715 4 1V3H3C1.34315 3 0 4.34315 0 6V7H20V6C20 4.34315 18.6569 3 17 3Z"
            fill="#FDFFFC"></path>
          <path
            d="M0 17C0 18.6569 1.34315 20 3 20H17C18.6569 20 20 18.6569 20 17V9H0V17Z"
            fill="#FDFFFC"></path>
        </svg>
        <p class="text-base text-white">{eventDate}</p>
      </div>
      <div class="flex">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="18"
          height="21"
          viewBox="0 0 18 21"
          fill="none"
          class="mr-3"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M0 12C0 7.02944 4.02944 3 9 3C13.9706 3 18 7.02944 18 12C18 16.9706 13.9706 21 9 21C4.02944 21 0 16.9706 0 12ZM11 15.0058C11.2666 15.0058 11.5222 14.8993 11.71 14.71C11.8993 14.5222 12.0058 14.2666 12.0058 14C12.0058 13.7334 11.8993 13.4778 11.71 13.29L10 11.59V8C10 7.44772 9.55228 7 9 7C8.44771 7 8 7.44772 8 8V12C7.99846 12.2658 8.10281 12.5213 8.29 12.71L10.29 14.71C10.4778 14.8993 10.7334 15.0058 11 15.0058Z"
            fill="#FDFFFC"></path>
          <path
            d="M15.9992 5.00003C15.8026 5.00228 15.6102 4.94282 15.4492 4.83003L12.4492 2.83003C12.1148 2.65065 11.9107 2.29745 11.9223 1.91814C11.934 1.53884 12.1593 1.19881 12.5041 1.04026C12.8488 0.881717 13.2537 0.931979 13.5492 1.17003L16.5492 3.17003C16.9132 3.41463 17.0754 3.86788 16.9491 4.28789C16.8229 4.7079 16.4377 4.99664 15.9992 5.00003Z"
            fill="#FDFFFC"></path>
          <path
            d="M2.00017 5.00003C1.56161 4.99664 1.17644 4.7079 1.05021 4.28789C0.923974 3.86788 1.08614 3.41463 1.45017 3.17003L4.45017 1.17003C4.7457 0.931979 5.1505 0.881717 5.49528 1.04026C5.84005 1.19881 6.06537 1.53884 6.077 1.91814C6.08864 2.29745 5.88458 2.65065 5.55017 2.83003L2.55017 4.83003C2.38913 4.94282 2.19677 5.00228 2.00017 5.00003V5.00003Z"
            fill="#FDFFFC"></path>
        </svg>
        <p class="text-base text-white">{eventTime}</p>
      </div>
      <div class="flex">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="20"
          viewBox="0 0 14 20"
          fill="none"
          class="mr-3"
        >
          <circle cx="7" cy="7" r="1" fill="#FDFFFC"></circle>
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M6.99971 0C10.8657 0 13.9997 3.13401 13.9997 7C14.1397 10.13 11.6297 14.3 7.80971 19.58C7.62165 19.8398 7.32041 19.9936 6.99971 19.9936C6.67902 19.9936 6.37778 19.8398 6.18971 19.58C2.36971 14.29 -0.140287 10.12 -0.000287258 7C-0.0002872 3.13401 3.13372 0 6.99971 0ZM3.99971 7C3.99971 8.65685 5.34286 10 6.99971 10C7.79536 10 8.55842 9.68393 9.12103 9.12132C9.68364 8.55871 9.99971 7.79565 9.99971 7C9.99971 5.34315 8.65657 4 6.99971 4C5.34286 4 3.99971 5.34315 3.99971 7Z"
            fill="#FDFFFC"></path>
        </svg>
        <p class="text-base text-white">{eventFaculty}</p>
      </div>
    </div>

    <form id="form" class="flex flex-col items-center">
      <EventRegisterBox1 />
      <EventRegisterBox2 />
      <EventRegisterBox3 />

      <!-- <div class="mb-16 flex">
        <CheckBox name="agreement" value="agreed" id="agreement" client:load />
        <label class="text-base text-white"
          >ยอมรับ<span class="font-bold underline"
            >นโยบายความเป็นส่วนตัวและข้อตกลงการใช้งาน</span
          ></label
        >
      </div> -->
      <button
        type="submit"
        class="place-self-center rounded-md border border-white bg-transparent px-4 py-2 text-white"
      >
        ลงทะเบียน / Register</button
      >
    </form>

    <script>
      const form = document.getElementById("form");
      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const formData = new FormData(form as HTMLFormElement);
        const data = Object.fromEntries(formData);
        console.log(data);
        const checkbox3Data = getCheckBoxesValue("sourceOfNews");
        console.log(checkbox3Data);
        const checkboxAgreement = getCheckBoxesValue("agreement");
        console.log(checkboxAgreement);
        // const checkboxAgreement = getCheckBoxesValue
      });
      function getCheckBoxesValue(name: string) {
        return [].slice
          .apply(
            document.querySelectorAll("input[type=checkbox][name=" + name + "]")
          )
          .filter(function (c) {
            return c.checked;
          })
          .map(function (c) {
            return c.value;
          });
      }
    </script>
  </div>
</BaseLayout>
